(this["webpackJsonpwebnotion-test"]=this["webpackJsonpwebnotion-test"]||[]).push([[0],{112:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(21),s=n.n(a),i=n(8),o=n(64),l=n(9),j=n(118),u=n(114),d=n(1),b=function(){return Object(d.jsx)(j.a,{bg:"dark",variant:"dark",children:Object(d.jsx)(u.a,{children:Object(d.jsx)(j.a.Brand,{children:"Webnotion test task with react-bootstrap"})})})},h=n(18),O=n.n(h),x=n(25),f=n(26),p=n.n(f),m=n(121),v=n(117),y=n(120),g=n(116),w=n(42),C=n.n(w),k=r.a.createContext(),S=n(10),E=n(115),D=n(60),I=n(119),N=function(e){var t,n,r,a,s=e.allPositions,o=e.setFilteredEmployees,l=e.allEmployees,j=e.URL,b=e.setFilter,h=e.filter,f=Object(c.useState)({}),m=Object(i.a)(f,2),v=m[0],y=m[1],w=Object(c.useContext)(k),C=w.contractTypes,N=w.setContractTypes,T=new Date;Object(c.useEffect)((function(){L()}),[]),Object(c.useEffect)((function(){F(v.position)}),[v.position]);var P=function(e){var t=e.target,n=t.value,c=t.name;y(Object(S.a)({},c,n))},F=function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.position){e.next=5;break}return b(!1),e.abrupt("return");case 5:return e.next=7,p.a.get(j+"/employees?positionId=".concat(v.position));case 7:t=e.sent,b(!0),o(t.data);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(j+"/contractTypes ");case 2:t=e.sent,N(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)(u.a,{className:"p-5",children:[Object(d.jsxs)(E.a,{className:"mt-2",children:[Object(d.jsx)(D.a,{lg:"2",children:Object(d.jsx)(I.a.Label,{children:"Position"})}),Object(d.jsx)(D.a,{lg:"4",children:Object(d.jsxs)(I.a.Select,{name:"position",value:null!==(t=v.position)&&void 0!==t?t:"",onChange:function(e){return P(e)},children:[Object(d.jsx)("option",{value:"",children:"Choose position"}),s.sort((function(e,t){return e.orderIdx-t.orderIdx})).map((function(e){return Object(d.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})]}),Object(d.jsxs)(E.a,{className:"mt-2",children:[Object(d.jsx)(D.a,{lg:"2",children:Object(d.jsx)(I.a.Label,{children:"Contract Type"})}),Object(d.jsx)(D.a,{lg:"4",children:Object(d.jsxs)(I.a.Select,{name:"contractType",value:null!==(n=v.contractType)&&void 0!==n?n:"",onChange:function(e){return function(e){P(e);var t=e.target.value,n=[];t?(b(!0),l.forEach((function(e){e.contracts.find((function(e){return e.typeId===Number(t)&&T>new Date(e.from)&&(T<new Date(e.to)||null===e.to)}))&&n.push(e),o(n)}))):b(!1)}(e)},children:[Object(d.jsx)("option",{value:"",children:"Choose contract type"}),C&&C.map((function(e){return Object(d.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})]}),Object(d.jsxs)(E.a,{className:"mt-2",children:[Object(d.jsx)(D.a,{lg:"2",children:Object(d.jsx)(I.a.Label,{children:"Active/Unactive"})}),Object(d.jsx)(D.a,{lg:"4",children:Object(d.jsxs)(I.a.Select,{name:"status",value:null!==(r=v.status)&&void 0!==r?r:"",onChange:function(e){return function(e){P(e);var t=e.target.value,n=[];"all"!==t?"active"===t?l.forEach((function(e){e.contracts.find((function(e){return(T<new Date(e.to)||null===e.to)&&T>new Date(e.from)}))&&n.push(e),b(!0),o(n)})):"unactive"===t&&l.forEach((function(e){e.contracts.find((function(e){return(T<new Date(e.to)||null===e.to)&&T>new Date(e.from)}))||(n.push(e),o(n),b(!0))})):b(!1)}(e)},children:[Object(d.jsx)("option",{value:"",children:"Choose contract status"}),Object(d.jsx)("option",{value:"all",children:"All"}),Object(d.jsx)("option",{value:"active",children:"Active"}),Object(d.jsx)("option",{value:"unactive",children:"Unactive"})]})})]}),Object(d.jsx)(E.a,{children:Object(d.jsxs)(I.a.Group,{children:[Object(d.jsx)(I.a.Label,{children:"Filter by Name"}),Object(d.jsx)(I.a.Control,{name:"nameFilter",type:"text",value:null!==(a=v.nameFilter)&&void 0!==a?a:"",onChange:function(e){return function(e){P(e),b(!0);var t=e.target.value,n=l.filter((function(e){return e.surname.toLowerCase().includes(t.toLowerCase())}));o(n),b(!0)}(e)}})]})}),Object(d.jsx)(E.a,{className:"",children:Object(d.jsx)(D.a,{lg:"2",children:Object(d.jsx)(g.a,{className:"mt-2",onClick:function(){b(!1),y({})},disabled:!h,children:"Cancel filter"})})})]})},T=function(e){return e.split("-").reverse().join(".")},P=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),s=Object(i.a)(a,2),o=s[0],j=s[1],b=Object(c.useState)(!1),h=Object(i.a)(b,2),f=h[0],m=h[1],y=Object(c.useState)(!1),g=Object(i.a)(y,2),w=g[0],S=g[1],E=Object(c.useContext)(k),D=E.setCurrentEmployeeId,I=E.setAllPositions,P=E.allPositions,F=f?o:n,L=Object(l.f)();Object(c.useEffect)((function(){B(),U()}),[]);var B=function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,p.a.get(A+"/employees");case 3:t=e.sent,r(t.data),S(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(A+"/positions");case 2:t=e.sent,I(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(e){var t=new Date,n=e.find((function(e){return new Date(e.from)<t&&null===e.to})),c=e.find((function(e){return new Date(e.from)<t&&t<new Date(e.to)}));return n?Object(d.jsxs)("p",{children:[T(n.from)," - ..."]},n.id):c?Object(d.jsxs)("p",{children:[T(c.from)," - ",T(c.to)]},c.id):Object(d.jsx)("p",{children:"-"})};return Object(d.jsxs)(u.a,{children:[Object(d.jsx)(N,{allPositions:P,allEmployees:n,URL:A,setFilter:m,filter:f,setFilteredEmployees:j}),Object(d.jsxs)(v.a,{striped:!0,bordered:!0,hover:!0,children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"ID"}),Object(d.jsx)("th",{children:"Name"}),Object(d.jsx)("th",{children:"Position"}),Object(d.jsx)("th",{children:"Active contract"})]})}),Object(d.jsx)("tbody",{children:w?Object(d.jsx)("tr",{children:Object(d.jsx)("td",{colSpan:4,className:"text-center",children:Object(d.jsx)(C.a,{type:"BallTriangle",color:"#0d6efd"})})}):null===F||void 0===F?void 0:F.sort((function(e,t){return e.surname.localeCompare(t.surname)||e.name.localeCompare(t.name)})).map((function(e){var t;return Object(d.jsxs)("tr",{onClick:function(e){return function(e){var t=e.target.id;D(t),L.push("/info")}(e)},children:[Object(d.jsx)("td",{id:e.id,children:e.id}),Object(d.jsx)("td",{id:e.id,children:"".concat(e.surname," ").concat(e.name)}),Object(d.jsx)("td",{id:e.id,children:null===(t=P.find((function(t){return t.id===e.positionId})))||void 0===t?void 0:t.name}),Object(d.jsx)("td",{id:e.id,children:J(e.contracts)})]},e.id)}))})]})]})},F=function(){var e,t=Object(c.useContext)(k),n=t.currentEmployeeId,r=t.allPositions,a=t.contractTypes,s=Object(c.useState)({}),o=Object(i.a)(s,2),j=o[0],b=o[1],h=Object(c.useState)(!1),f=Object(i.a)(h,2),w=f[0],S=f[1],E=Object(c.useState)(""),D=Object(i.a)(E,2),I=D[0],N=D[1],P=Object(l.f)(),F=function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,e.next=4,p.a.get(A+"/employees/".concat(n));case 4:t=e.sent,b(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),N(!0);case 11:S(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){F()}),[]),console.log(I),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(u.a,{className:"p-4",children:[I?Object(d.jsxs)(y.a,{variant:"danger",children:[Object(d.jsx)(y.a.Heading,{children:"Oh snap! You got an error!"}),Object(d.jsx)("p",{children:"It looks like you entered the address manually and the system did not receive an employee ID for more detailed information"})]}):Object(d.jsx)(m.a,{children:Object(d.jsxs)(m.a.Body,{children:[Object(d.jsxs)(m.a.Title,{children:[j.surname," ",j.name]}),Object(d.jsx)(m.a.Subtitle,{className:"mb-2 text-muted",children:function(){var e;return null===(e=r.find((function(e){return e.id===j.positionId})))||void 0===e?void 0:e.name}()}),Object(d.jsx)(m.a.Title,{children:"All Contracts "}),Object(d.jsxs)(v.a,{striped:!0,bordered:!0,hover:!0,children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Contract Type"}),Object(d.jsx)("th",{children:"Start date"}),Object(d.jsx)("th",{children:"End date"})]})}),Object(d.jsx)("tbody",{className:"",children:w?Object(d.jsx)("tr",{children:Object(d.jsx)("td",{colSpan:4,className:"text-center",children:Object(d.jsx)(C.a,{type:"BallTriangle",color:"#0d6efd"})})}):null===j||void 0===j||null===(e=j.contracts)||void 0===e?void 0:e.sort((function(e,t){return new Date(e.from)<new Date(t.from)?1:-1})).map((function(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:a.find((function(t){return t.id===e.typeId})).name}),Object(d.jsx)("td",{children:e.from?T(e.from):"..."}),Object(d.jsx)("td",{children:e.to?T(e.to):"..."})]},e.id)}))})]})]})}),Object(d.jsx)(g.a,{className:"mt-3",onClick:function(){return P.goBack()},children:"Back"})]})})},L=function(){return Object(d.jsx)(u.a,{children:Object(d.jsx)(P,{})})},A="https://my-json-server.typicode.com/1ohnny/test-api";var B=function(){var e=Object(c.useState)({}),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),s=Object(i.a)(a,2),j=s[0],u=s[1],h=Object(c.useState)([]),O=Object(i.a)(h,2),x=O[0],f=O[1];return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(k.Provider,{value:{currentEmployeeId:n,setCurrentEmployeeId:r,allPositions:j,setAllPositions:u,contractTypes:x,setContractTypes:f},children:Object(d.jsxs)(o.a,{children:[Object(d.jsx)(b,{}),Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{exact:!0,path:"/",component:L}),Object(d.jsx)(l.a,{path:"/info",component:F})]})]})})})};n(111);s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(B,{})}),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.1671f7c1.chunk.js.map